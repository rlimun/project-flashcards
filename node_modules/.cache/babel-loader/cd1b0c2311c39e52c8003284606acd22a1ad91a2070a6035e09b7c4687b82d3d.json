{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{listDecks,deleteDeck}from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{console.log(\"Home component is rendering\");const[decks,setDecks]=useState([]);const history=useHistory();useEffect(()=>{const abortController=new AbortController();const fetchDecks=async()=>{try{const data=await listDecks();console.log(\"Fetched decks:\",data);setDecks(data);}catch(error){console.error(\"error\",error);}};fetchDecks();return()=>{abortController.abort();};},[]);const handleStudyClick=deckId=>{history.push(\"/decks/\".concat(deckId,\"/study\"));};const handleCreateDeckClick=deckId=>{history.push(\"/decks/new\");};const handleViewClick=deckId=>{history.push(\"/decks/\".concat(deckId));};/** \n    * Delete Deck prompt\n    * When the user clicks the Delete button, a warning message is shown and the user can click OK or Cancel. \n    * If the user clicks OK, the deck is deleted and the deleted deck is no longer visible on the Home screen.\n    **/const handleDelete=async deckId=>{const confirmed=window.confirm('Delete this deck? You will not be able to recover it');if(confirmed){try{await deleteDeck(deckId);setDecks(prevDecks=>prevDecks.filter(deck=>deck.id!==deckId));history.go(0);}catch(error){console.error(\"Error deleting deck\",error);}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateDeckClick,children:\"Create Deck\"}),decks.map(deck=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[deck.name,\" \",deck.cards.length,\" cards\"]}),/*#__PURE__*/_jsx(\"p\",{children:deck.description}),/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deck.id),children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewClick(deck.id),children:\"View\"})}),/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deck.id,\"/study\"),children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStudyClick(deck.id),children:\"Study\"})}),/*#__PURE__*/_jsx(\"button\",{name:\"delete\",onClick:()=>handleDelete(deck.id),children:\" Delete \"})]},deck.id))]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Link","useHistory","listDecks","deleteDeck","jsx","_jsx","jsxs","_jsxs","Home","console","log","decks","setDecks","history","abortController","AbortController","fetchDecks","data","error","abort","handleStudyClick","deckId","push","concat","handleCreateDeckClick","handleViewClick","handleDelete","confirmed","window","confirm","prevDecks","filter","deck","id","go","children","onClick","map","name","cards","length","description","to"],"sources":["/Users/rlimun/SWE_Program/Front-End-Development/react-assessment/project-flashcards/src/Layout/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { listDecks, deleteDeck } from \"../utils/api\";\n\n\nconst Home = () => {\n    console.log(\"Home component is rendering\");\n    const [decks, setDecks] = useState([]);\n    const history = useHistory();\n\n    useEffect(() => {\n    const abortController = new AbortController();\n        const fetchDecks = async() => {\n            try {\n                const data = await listDecks();\n                console.log(\"Fetched decks:\", data);\n                setDecks(data);\n            } catch(error) {\n                console.error(\"error\", error);\n            }\n        }\n\n        fetchDecks();\n        return () => {\n            abortController.abort();\n        }\n    }, []);\n\n    const handleStudyClick = (deckId) => {\n         history.push(`/decks/${deckId}/study`);\n     }\n \n     const handleCreateDeckClick = (deckId) => {\n         history.push(\"/decks/new\");\n     }\n \n     const handleViewClick = (deckId) => {\n         history.push(`/decks/${deckId}`);\n     }\n\n    /** \n    * Delete Deck prompt\n    * When the user clicks the Delete button, a warning message is shown and the user can click OK or Cancel. \n    * If the user clicks OK, the deck is deleted and the deleted deck is no longer visible on the Home screen.\n    **/\n    const handleDelete = async (deckId) => {\n        const confirmed = window.confirm('Delete this deck? You will not be able to recover it');\n        if (confirmed) {\n            try {\n                await deleteDeck(deckId);\n                setDecks((prevDecks) => prevDecks.filter((deck) => deck.id !== deckId));\n                history.go(0);\n            } catch(error){\n                console.error(\"Error deleting deck\", error);\n            }\n        }\n    };\n    \n    return (\n        <div>\n            <button onClick={handleCreateDeckClick}>Create Deck</button>\n            { decks.map((deck) => (\n                <div key={deck.id}\n                >\n                    <h4>{deck.name} {deck.cards.length} cards</h4>\n                    <p>{deck.description}</p>\n                    {/* Clicking the View button brings the user to the Deck screen.*/}  \n                    <Link to={`/decks/${deck.id}`}>\n                        <button onClick={() => handleViewClick(deck.id)}>View</button>\n                    </Link>\n                    {/* Clicking the Study button brings the user to the Study screen.*/} \n                    <Link to={`/decks/${deck.id}/study`}>\n                        <button onClick={() => handleStudyClick(deck.id) }>Study</button>\n                    </Link> \n                    {/*Clicking the Delete button shows a warning message before deleting the deck.*/}\n                    <button name=\"delete\" onClick={() => handleDelete(deck.id)}> Delete </button>\n                </div>\n            ))}\n        </div>\n    )\n\n}\n\n\nexport default Home;\n\n              "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}