{"ast":null,"code":"import React,{useEffect}from\"react\";import{useHistory,useParams}from\"react-router-dom\";import{deleteCard,readDeck}from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CardsList(_ref){let{deck,setDeck}=_ref;const history=useHistory();const{deckId}=useParams();useEffect(()=>{const abortController=new AbortController();const fetchDeck=async()=>{try{const response=await readDeck(deckId,abortController.signal);const data=response.json();setDeck(data);console.log('this is the deck',data);}catch(error){console.log('Error fetching decks',error);}};fetchDeck();return()=>{abortController.abort();};},[deckId,setDeck]);const handleCardEditButton=async cardId=>{history.push(\"/decks/:deckId/cards/\".concat(cardId,\"/edit\"));};const handleCardDeleteButton=async cardId=>{const confirmed=window.confirm('Delete this card? You will not be able to recover it');const abortController=new AbortController();if(confirmed){try{await deleteCard(cardId,abortController.signal);const response=await readDeck(deck.id,abortController.signal);const data=response.json();setDeck(data);}catch(error){console.error(\"Error deleting card\",error);}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Cards\"}),deck.cards.map(card=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Question: \",card.question]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Answer: \",card.answer]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCardEditButton(card.id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCardDeleteButton(card.id),children:\"Delete\"})]},card.id))]});}export default CardsList;","map":{"version":3,"names":["React","useEffect","useHistory","useParams","deleteCard","readDeck","jsx","_jsx","jsxs","_jsxs","CardsList","_ref","deck","setDeck","history","deckId","abortController","AbortController","fetchDeck","response","signal","data","json","console","log","error","abort","handleCardEditButton","cardId","push","concat","handleCardDeleteButton","confirmed","window","confirm","id","children","cards","map","card","question","answer","onClick"],"sources":["/Users/rlimun/SWE_Program/Front-End-Development/react-assessment/project-flashcards/src/Layout/CardsList.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { deleteCard, readDeck } from \"../utils/api\";\n\n\nfunction CardsList({ deck, setDeck }) {\n    const history = useHistory();\n    \n    const { deckId } = useParams();\n\n    useEffect(() => {\n        const abortController = new AbortController();\n        const fetchDeck = async() => {\n            try {\n                const response = await readDeck(deckId, abortController.signal);\n                const data = response.json();\n                setDeck(data);\n                console.log('this is the deck', data);\n            }\n            catch(error){\n                console.log('Error fetching decks', error);\n            }\n        }\n        fetchDeck();\n        return () => {\n            abortController.abort();\n        }\n    }, [deckId, setDeck]);\n\n    const handleCardEditButton = async(cardId) => {\n        history.push(`/decks/:deckId/cards/${cardId}/edit`)\n    }\n\n    const handleCardDeleteButton = async(cardId) => {\n        const confirmed = window.confirm('Delete this card? You will not be able to recover it');\n        const abortController = new AbortController();\n        if (confirmed) {\n            try {\n                await deleteCard(cardId, abortController.signal);\n                const response = await readDeck(deck.id, abortController.signal);\n                const data = response.json();\n                setDeck(data);\n            } catch(error){\n                console.error(\"Error deleting card\", error);\n            }\n        }\n    }\n\n    return (\n        <div>\n            <h3>Cards</h3>\n            { deck.cards.map((card) => (\n                <div key={card.id}>\n                    <p>Question: {card.question}</p>\n                    <p>Answer: {card.answer}</p>\n                    <button onClick={() => handleCardEditButton(card.id)}>Edit</button>\n                    <button onClick={() => handleCardDeleteButton(card.id)}>Delete</button>\n                </div>\n            ))}\n        </div>\n    )\n}\n\nexport default CardsList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}